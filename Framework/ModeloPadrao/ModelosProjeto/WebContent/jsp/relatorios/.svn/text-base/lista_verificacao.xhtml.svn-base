<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets">
<ui:composition template="/jsp/include/template.xhtml">
	<ui:define name="breadcrumb">
		<h:panelGroup id="pnlBread">
			<h:outputLabel value="#{msgsVerificacaoPreventiva['BREAD-RELATORIO']}" />
		</h:panelGroup>
	</ui:define>
	<ui:define name="conteudo">
		<script type="text/javascript">

			jQuery.fn.enterSubmit = function(){
				jQuery(this).live("keypress", function(e) {
			        /* ENTER PRESSED*/
			        if (e.keyCode == 13) {
				        this.value = this.value.replace(/_/g, "");
			        	jQuery(".btn-consultar").click();
			        	return false;
			        }
			        return true;
			    });
			};
	
			function checkForConfirmation(existe) {
				if(existe)
				{
					if(confirm('#{msgsCef['MA010']}'))
					{
						jsReplaceChecklist();
					} else {
						return false;
					}
				}
				else 
				{
					jsSaveChecklist();
				}
			};	

		</script>
		<h:form id="formPrincipal" prependId="false">
		<a4j:keepAlive beanName="relatorioVerificacaoMB" />	
			<rich:panel id="panelPrincipal">
				<h:panelGroup
					id="panelLista">
					<br/>
					<div style="float: left;">
						<h:graphicImage
							value="/images/icon_estagiarios_.gif"
							style="vertical-align: bottom;" />
						<h:outputText
							id="lbl_titlePanelListContrato"
							value="#{msgsVerificacaoPreventiva['TITLE.panelLista']}"
							styleClass="tituloPagina" />
					<rich:spacer width="700"/>
					<div style="float: right;">
					
						<h:graphicImage
							value="/images/icon_pend.gif"
							style="vertical-align: bottom; margin-right: 5px;" />
						<h:outputText
							id="lbl_titleConforme" style="margin-right: 20px;"
							value="#{msgsVerificacaoPreventiva['LABEL.verificacaoParcial']}"
							/>	
							
						<h:graphicImage
							value="/images/icon_verifica.gif"
							style="vertical-align: bottom; margin-right: 5px;" />
						<h:outputText
							id="lbl_titleVerificacaoParcial" style="margin-right: 20px;"
							value="#{msgsVerificacaoPreventiva['LABEL.conforme']}"
							/>
						
					
						<h:graphicImage
							value="/images/icon_parcialmente_inconforme.gif"
							style="vertical-align: bottom; margin-right: 5px;" />
						<h:outputText
							id="lbl_titleInconforme" style="margin-right: 20px;"
							value="#{msgsVerificacaoPreventiva['LABEL.inconforme']}"/>
							
					</div>							
					</div>

					<br />
					<rich:spacer height="10" />
					<rich:dataTable
						id="tableContrato"
						value="#{relatorioVerificacaoMB.listaVerificacaoPreventiva}"
						var="contrato"
						rows="10"
						width="100%"
						cellspacing="0"
						cellpadding="0"
						border="1"
						rowClasses="tabela-row-1, tabela-row-2"
						onRowMouseOver="this.style.backgroundColor = '#A2B6E5'"
						onRowMouseOut="this.style.backgroundColor = ''">
						<rich:column
							id="colContratoStatus"
							style="text-align:center; width: 10px;"
							sortBy="#{relatorioVerificacaoMB.situacao}">
							<f:facet name="header">
								<h:outputText value="#{msgsVerificacaoPreventiva['COLUMN.situacao']}" />
							</f:facet>
							<h:graphicImage id="imgStatus" value="#{relatorioVerificacaoMB.situacao}" />
						</rich:column>
						<rich:column
							id="colGiret"
							style="text-align:center; width: 30px;"
							sortBy="#{contrato.nuUnidade}">
							<f:facet name="header">
								<h:outputText value="GIRET" />
							</f:facet>
							<h:outputText value="" />
						</rich:column>
						<rich:column
							id="colSR"
							style="text-align:center; width: 40px;"
							sortBy="#{contrato.nuUnidade}">
							<f:facet name="header">
								<h:outputText value="SR" />
							</f:facet>
							<h:outputText value="" />
						</rich:column>
						<rich:column
							id="colContratoCoUnidade"
							style="text-align:center; width: 50px;"
							sortBy="#{contrato.nuUnidade}">
							<f:facet name="header">
								<h:outputText value="#{msgsVerificacaoPreventiva['COLUMN.unidade']}" />
							</f:facet>
							<h:outputText
								id="lblcoUnidade"
								value="#{contratoMB.codUnidadeFormatado}" />
						</rich:column>
						<rich:column
							id="colContratoCoProduto"
							style="text-align:center; width: 40px;"
							sortBy="#{contrato.produto.coProduto}">
							<f:facet name="header">
								<h:outputText value="#{msgsVerificacaoPreventiva['COLUMN.produto']}" />
							</f:facet>
							<h:outputText
								id="lblcoProduto"
								value="#{contratoMB.codProdutoFormatado}" />
						</rich:column>
						<rich:column
							id="colContratoCoContrato"
							style="text-align:center; width: 60px;"
							sortBy="#{contrato.coContrato}">
							<f:facet name="header">
								<h:outputText value="#{msgsVerificacaoPreventiva['COLUMN.contrato']}" />
							</f:facet>
							<h:outputText
								id="lblCoContrato" 
								value="#{contrato.coContrato}">
							</h:outputText>
						</rich:column>
						<rich:column
							id="colContratoNoCliente"
							style="text-align:center;"
							sortBy="#{contrato.noCliente}">
							<f:facet name="header">
								<h:outputText value="#{msgsVerificacaoPreventiva['COLUMN.cliente']}" />
							</f:facet>
							<h:outputText
								id="lblNoCliente"
								value="#{contrato.noCliente}" />
						</rich:column>
						<rich:column
							id="colContratoTipoIdentfCliente"
							style="text-align: center;" 
							sortBy="#{contrato.nuIdentificadorCliente}">
							<f:facet name="header">
								<h:outputText value="#{msgsVerificacaoPreventiva['COLUMN.cpfcnpj']}" />
							</f:facet>
							<h:outputText value="#{contratoMB.nuIdentificadorClienteFormatado}" />
						</rich:column>
						<rich:column
							id="colContratoDtInclusao"
							style="text-align:center; "
							sortBy="#{contrato.dtContrato}">
							<f:facet name="header">
								<h:outputText value="#{msgsVerificacaoPreventiva['COLUMN.data']}" />
							</f:facet>
							<h:outputText
								id="lblDtInclusao"
								value="#{contratoMB.dtContratoFormatada}" />
						</rich:column>
						<rich:column
							headerClass="th-text-center"
							style="text-align: center;">
							<f:facet name="header">
								<h:outputText value="VALOR" />
							</f:facet>
							<h:outputText
								id="lblValor"
								value="#{contrato.vrNominalContrato}" 
								converter="#{converterMonetario}"/>
						</rich:column>

						<f:facet name="footer">
							<rich:datascroller
								fastControls="false"
								inactiveStyleClass="classe-datascroller classe-datascroller-unselected"
								selectedStyleClass="classe-datascroller classe-datascroller-selected"
								id="dataFooterContrato"
								renderIfSinglePage="false">
								<f:facet name="first">
									<h:graphicImage value="/images/tabela/seta_primeiro.gif" />
								</f:facet>
								<f:facet name="first_disabled">
									<h:graphicImage value="/images/tabela/seta_primeiro.gif" />
								</f:facet>
								<f:facet name="last">
									<h:graphicImage value="/images/tabela/seta_ultimo.gif" />
								</f:facet>
								<f:facet name="last_disabled">
									<h:graphicImage value="/images/tabela/seta_ultimo.gif" />
								</f:facet>
								<f:facet name="previous">
									<h:graphicImage value="/images/tabela/seta_anterior.gif" />
								</f:facet>
								<f:facet name="previous_disabled">
									<h:graphicImage value="/images/tabela/seta_anterior.gif" />
								</f:facet>
								<f:facet name="next">
									<h:graphicImage value="/images/tabela/seta_proximo.gif" />
								</f:facet>
								<f:facet name="next_disabled">
									<h:graphicImage value="/images/tabela/seta_proximo.gif" />
								</f:facet>
							</rich:datascroller>
						</f:facet>
					</rich:dataTable>
					<br/>
					<h:panelGroup
						id="confFiltro"
						style="margin-left: 577px; *margin-left: 527px;">
					<a4j:commandButton
						tabindex="17"
						id="btnExportPdf"
						styleClass="rich-button btn-consultar"
						value="#{msgsVerificacaoPreventiva['ACTION.exportar']}"
						action="#{relatorioVerificacaoMB.geraPDF}"
						reRender="download"
						oncomplete="#{rich:component('download')}.show()"
						status="sts"
						style="*width: 135px;" />
					<rich:spacer width="30"/>
					<a4j:commandButton
						tabindex="17"
						id="btnGeraPlanilha"
						styleClass="rich-button btn-consultar"
						value="#{msgsVerificacaoPreventiva['ACTION.geraRel']}"
						action="#{relatorioVerificacaoMB.exportaXLS}"
						reRender="download"
						oncomplete="#{rich:component('download')}.show()"
						status="sts"
						style="*width: 135px;" />
					<rich:spacer width="30"/>
					<h:commandButton
						tabindex="17"
						id="btnVoltaInicio"
						styleClass="rich-button-cinza rich-button"
						value="#{msgsVerificacaoPreventiva['ACTION.voltar']}"
						action="#{relatorioVerificacaoMB.doCancelarClick}"
						status="sts" />																			
					</h:panelGroup>	
				</h:panelGroup>	
				<rich:modalPanel
					id="download"
					width="300"
					height="100">
					<f:facet name="header">
						<h:outputText value="Emissão de Relatório" />
					</f:facet>
					<f:facet name="controls">
						<h:panelGroup>
							<a4j:commandLink
								id="modalSair"
								onclick="#{rich:component('download')}.hide()">
								<h:graphicImage value="/images/close.png" />
							</a4j:commandLink>
							<rich:componentControl
								for="download"
								attachTo="modalSair"
								operation="hide"
								event="oncomplete" />
						</h:panelGroup>
					</f:facet>
					<rich:messages
						id="messages_CEFMessagePanel_download"
						showDetail="false"
						showSummary="true"
						errorClass="rotulo"
						warnClass="rotulo"
						infoClass="rotulo"
						fatalClass="rotulo">
						<f:facet name="infoMarker">
							<h:graphicImage
								value="/images/infoicon.gif"
								style="margin-right:10px" />
						</f:facet>
						<f:facet name="errorMarker">
							<h:graphicImage
								value="/images/falta.gif"
								style="margin-right:10px" />
						</f:facet>
						<f:facet name="warnMarker">
							<h:graphicImage
								value="/images/warnIcon2.gif"
								style="margin-right:10px" />
						</f:facet>
					</rich:messages>
					<h:outputText
						rendered="#{!checklistMB.errorDownload}"
						style="font-size: 15px; margin-left: 70px;"
						value="Relatório disponível" />
					<br />
					<rich:spacer height="30" />
					<h:commandButton
						value="Visualizar"
						style="margin-left: 90px;"
						styleClass="rich-button"
						id="fecharModalDownload"
						rendered="#{!checklistMB.errorDownload}"
						action="#{checklistMB.downloadRel}">
						<rich:componentControl
							for="download"
							attachTo="fecharModalDownload"
							operation="hide"
							event="onclick" />
					</h:commandButton>
				</rich:modalPanel>						
			</rich:panel>
		</h:form>
	</ui:define>
</ui:composition>
</html>