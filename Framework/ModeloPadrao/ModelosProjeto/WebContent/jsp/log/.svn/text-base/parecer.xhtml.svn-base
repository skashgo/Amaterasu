<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets">
<ui:composition template="/jsp/include/template.xhtml">
	<ui:define name="breadcrumb">
		<h:panelGroup id="pnlBread">
			<h:outputLabel value="#{msgsLogParecer['BREAD']}" />
		</h:panelGroup>
	</ui:define>
	<ui:define name="conteudo">
		<script type="text/javascript">
			

			jQuery.fn.enterSubmit = function(){
				jQuery(this).live("keypress", function(e) {
			        /* ENTER PRESSED*/
			        if (e.keyCode == 13) {
				        this.value = this.value.replace(/_/g, "");
			        	jQuery(".btn-consultar").click();
			        	return false;
			        }
			        return true;
			    });
			};
	
			function checkForConfirmation(existe) {
				if(existe)
				{
					if(confirm('#{msgsCef['MA010']}'))
					{
						jsReplaceChecklist();
					} else {
						return false;
					}
				}
				else 
				{
					jsSaveChecklist();
				}
			};

			function iniciaCampoTexto()
			{
				tinyMCE.init({theme : "advanced", 
					  mode : "textareas", 
					  //add paste plugin
					  plugins : 'paste',
					  language : "pt",
					  theme_advanced_buttons2 : "bullist,numlist,|,undo,redo,|,link,unlink,anchor,cleanup,help",
					  //Keeps Paste Text feature active until user deselects the Paste as Text button
					  paste_text_sticky : true,
					  //select pasteAsPlainText on startup
					  setup : function(ed) {
					      ed.onInit.add(function(ed) {
					          ed.pasteAsPlainText = true;
					      });
					  }
				});
			};

			tinyMCE.init({theme : "advanced", 
				  mode : "textareas", 
				  //add paste plugin
				  plugins : 'paste',
				  language : "pt",
				  theme_advanced_buttons2 : "bullist,numlist,|,undo,redo,|,link,unlink,anchor,image,cleanup,help",
				  //Keeps Paste Text feature active until user deselects the Paste as Text button
				  paste_text_sticky : true,
				  //select pasteAsPlainText on startup
				  setup : function(ed) {
				      ed.onInit.add(function(ed) {
				          ed.pasteAsPlainText = true;
				      });
				  }
			});	

		</script>
		
		<style>
			.dr-stglpnl-h {
				background: none !important;
				border-style: none !important;
			}
			
			.rich-stglpanel-header {
				background: none !important;
			}
			
			.dr-stglpnl {
				background: none !important;
			}
			
			.rich-stglpanel {
				background: none !important;
			}
			
			.dr-mpnl-pnl {
				overflow: auto !important
			}
		</style>

		<h:form id="formPrincipal" prependId="false">
			<a4j:keepAlive beanName="logParecerMB" />
			
			<rich:panel id="panelPrincipal">
				<!-- FILTROS PARA PESQUISA -->
				<h:panelGroup id="panelFiltro">	
					
					<rich:panel
						styleClass="panel-externo"
						id="pnlConsultarSimples"
						style="margin-top: 10px;"
						rendered="#{logParecerMB.showConsultarSimples}">
						
						<div class="span-23 clear last"
								id="pnlGridFiltroLogParecer"
								style="padding:5px; margin-left: 16px; line-height: 2;">
								<div class="span-3 clear" >
									<h:graphicImage
										value="/images/icon_search.gif"
										style="vertical-align: top;"/>
									<h:outputText
										style="margin-left: 4px;"
										id="lblLogParecerFiltro"
										value="#{msgsLogParecer['LABEL.pesquisa']}"
										styleClass="rotulos"/>
								</div>
								<div class="span-14">
									<h:inputText
											id="inputLogParecerNomeFiltro"
											value="#{logParecerMB.filtroSimples}"
											styleClass="forms_input"
											tabindex="1"
											style=" width: 510px; horizontal-align: left; font-size: 13px;" >
										<rich:jQuery
											selector="#inputLogParecerMBNomeFiltro"
											query="enterSubmit()"
											timing="onload" />
									</h:inputText>
								</div>
								<div class="span-3" style="margin-left: -10px;">
									<a4j:commandButton
										tabindex="2"
										id="btnfiltrarLogParecerFiltro"
										styleClass="rich-button btn-consultar"
										value="#{msgsLogParecer['ACTION.filtrar']}"
										actionListener="#{logParecerMB.doConsultarClick}"
										reRender="conteudo, CEFMessagePanel, formPrincipal, tableReenviaParecer, pnlBread"
										status="sts" />
								</div>		
								<div class="span-3 last">
								</div>
								<div style="margin-top: 15px;">
									
									<div style="float:right; position: relative; top: 8px;">
										<h:graphicImage value="/images/icon_plus.gif" />
										<a4j:commandLink actionListener="#{logParecerMB.doConsultarAvancado}" value="#{msgsLogParecer['LABEL.pesquisaAvancada']}"
											status="sts"
													   styleClass="rotulos" reRender="panelPrincipal"
													   style="margin-left: 3px;" tabindex="5"/>
									</div>
								</div>
								<br/>
							</div>
							<br clear="all" />					
							<br clear="all" />
					</rich:panel>
										
					<rich:panel
						id="pnlFiltroAvancado"
						style="margin-top: 10px;"
						rendered="#{logParecerMB.showConsultarAvancado}"
						styleClass="panel-externo">
						<rich:jQuery id="mskDatePesq" selector=".maskDate" timing="onload" query="mask('99/99/9999')" />
						<table cellpadding="0" cellspacing="0" id="tabelaConsulta"
							border="1" class="estiloTabelaPadrao">
						
							<!--  Linha usada apenas para definir o tamanho das colunas -->
							<tr>
								<td width="15%"></td>
								<td width="13%"></td>
								<td width="16%"></td>
								<td></td>
								<td></td>
								<td width="15%"></td>
								<td></td>
							</tr>
							
							<tr class="distanciaLinha">
								<td>
									<h:outputLabel id="lblPesqUnidade"
										styleClass="rotulosPro"
										value="#{msgsLogParecer['LABEL.unidade']}: " />
								</td>
								<td>
									<h:inputText
										value="#{logParecerMB.filtroUnidade}"
										styleClass="forms_input pressEnter" style="width: 100px;"
										id="lblPesqCampoUnidade" maxlength="30" tabindex="1" size="8">
										<rich:jQuery selector="lblPesqCampoUnidade"
											query="enterSubmit()" timing="onload" />
										<a4j:support event="onblur" reRender="selectUnidadePesq" actionListener="#{logParecerMB.loadListUnidades}"  />
									</h:inputText>
								</td>
								<td colspan="3">
									<h:selectOneMenu
										value="#{logParecerMB.filtroCodUnidade}" id="selectUnidadePesq"
										tabindex="2" styleClass="forms_input pressEnter"
										style=" width : 385px;">
										<f:selectItem itemLabel="Selecione..." itemValue="" />
										<f:selectItems id="selectPesqItemsUnidade"
											value="#{logParecerMB.listUnidades}" />
										<rich:jQuery selector="#selectUnidadePesq" query="enterSubmit()"
											timing="onload" />
									</h:selectOneMenu>
								</td>
								<td>
									<h:outputLabel id="lblPesqCategoria"
										styleClass="rotulosPro"
										value="#{msgsLogParecer['LABEL.categoria']}: " />
								</td>
								<td>
									<h:selectOneMenu
											value="#{logParecerMB.filtroCampoCategoria}"
											id="selectCategoriaProPesq" tabindex="3" styleClass="forms_input"
											style="width: 116px;">
											<f:selectItem itemLabel="Selecione..." itemValue="0" />
											<f:selectItems id="selectItems_CategoriaProPesq"
												value="#{logParecerMB.listCategoria}" />
						
										<rich:jQuery selector="#selectCategoriaProPesq" query="enterSubmit()"
											timing="onload" />
										<a4j:support event="onchange" reRender="selectProdutoPesq, selectServicoPesq" actionListener="#{logParecerMB.loadListProdutos}" />
						
									</h:selectOneMenu>
								</td>
							</tr>
							
							<tr class="distanciaLinha">
								<td>
									<h:outputLabel id="lblPesqUnidadeVerificacao"
										styleClass="rotulosPro"
										value="#{msgsLogParecer['LABEL.unidadeVerificacao']}: " />
								</td>
								<td>
									<h:inputText
										value="#{logParecerMB.filtroUnidadeVerificacao}"
										styleClass="forms_input pressEnter" style="width: 100px;"
										id="lblPesqCampoUnidadeVerificacao" maxlength="30" tabindex="4" size="8">
										<rich:jQuery selector="lblPesqCampoUnidadeVerificacao"
											query="enterSubmit()" timing="onload" />
										<a4j:support event="onblur" reRender="selectUnidadeVerificacaoPesq" actionListener="#{logParecerMB.loadListUnidadesVerificacao}"  />
									</h:inputText>
								</td>
								<td colspan="3">
									<h:selectOneMenu
										value="#{logParecerMB.filtroCodUnidadeVerificacao}" id="selectUnidadeVerificacaoPesq"
										tabindex="5" styleClass="forms_input pressEnter"
										style=" width : 385px;">
										<f:selectItem itemLabel="Selecione..." itemValue="" />
										<f:selectItems id="selectPesqItemsUnidadeVerificacao"
											value="#{logParecerMB.listUnidadesVerificacao}" />
										<rich:jQuery selector="#selectUnidadeVerificacaoPesq" query="enterSubmit()"
											timing="onload" />
									</h:selectOneMenu>
								</td>
								<td>
									<h:outputLabel id="lblPesqCanal"
										styleClass="rotulosPro"
										value="#{msgsVerificacaoPreventiva['LABEL.canal']}: " />
								</td>
								<td>
									<h:selectOneMenu id="cbTpCanalComercializacaoPesq"
										value="#{logParecerMB.filtroCanalComercializacao}"
										styleClass="forms_input"
										tabindex="6"
										style="width: 116px;">
										<f:selectItem itemLabel="Selecione..." itemValue="" />
										<f:selectItems
											value="#{logParecerMB.listCanalComercializacao}" />
									</h:selectOneMenu>
								</td>
							</tr>
							
							<tr class="distanciaLinha">
								<td>
									<h:outputLabel id="lblPesqProduto"
										styleClass="rotulosPro"
										value="#{msgsLogParecer['LABEL.produto']}: " />
								</td>
								<td>
									<h:inputText
										value="#{logParecerMB.filtroProduto}"
										styleClass="forms_input pressEnter" style="width: 100px;"
										id="lblPesqCampoNome" maxlength="30" tabindex="7" size="8">
										<rich:jQuery selector="#lblPesqCampoNome"
											query="enterSubmit()" timing="onload" />
										<a4j:support event="onblur" reRender=" selectProdutoPesq" actionListener="#{logParecerMB.loadListProdutos}" />
									</h:inputText>
								</td>
								<td colspan="3">
									<h:selectOneMenu
										value="#{logParecerMB.filtroCodProduto}" id="selectProdutoPesq"
										tabindex="8" styleClass="forms_input pressEnter"
										style=" width : 385px;">
										<f:selectItem itemLabel="Selecione..." itemValue="" />
										<f:selectItems id="selectPesqItemsProduto"
											value="#{logParecerMB.listProdutos}" />
										<rich:jQuery
											selector="#selectProdutoPesq"
											query="enterSubmit()"
											timing="onload" />
										<a4j:support event="onchange" reRender="selectServicoPesq"/>
									</h:selectOneMenu>
								</td>
								<td>
									<h:outputLabel id="lblPesqUsuarioResponsavel"
										styleClass="rotulosPro"
										value="#{msgsLogParecer['LABEL.usuarioResp']}: " />
								</td>
								<td>
									<h:inputText value="#{logParecerMB.filtroCodUsuarioResp}"
										styleClass="forms_input pressEnter" style="width: 100px;"
										id="lblPesqCampoUsuarioResp" maxlength="10" tabindex="9" size="8" 
											 onfocus="type_masktype(false)">
											 <rich:jQuery
												id="mascaraUsuario"
												selector="#lblPesqCampoUsuarioResp"
												query="mask('a999999')"
												timing="onload" />
											<rich:jQuery 
												selector="#lblFiltroMatriculaUsuario" 
												timing="onload" 
												query="focus()" /> 
									</h:inputText>
								</td>
							</tr>
							
							<tr class="distanciaLinha">
								<td>
									<h:outputLabel id="lblPesqParecer"
										styleClass="rotulosPro"
										value="#{msgsLogParecer['COLUMN.parecer']}: " />
								</td>
								<td>
									<h:inputText
										value="#{logParecerMB.filtroParecer}"
										styleClass="forms_input pressEnter" style="width: 100px;"
										id="lblPesqCampoParecer" maxlength="30" tabindex="10" size="8">
									</h:inputText>
								</td>
								<td>
									<h:outputLabel id="lblPesqContrato"
										styleClass="rotulosPro"
										value="#{msgsLogParecer['LABEL.contrato']}: " />
								</td>
								<td colspan="2">
									<h:inputText
										value="#{logParecerMB.filtroCodContrato}"
										styleClass="forms_input pressEnter" style="width: 100px;"
										id="lblPesqCampoContrato" maxlength="30" tabindex="11" size="8">
									</h:inputText>
								</td>
								<td>
									<h:outputLabel id="lblPesqConveniado"
										styleClass="rotulosPro"
										value="#{msgsLogParecer['LABEL.conveniado']}: " />
								</td>
								<td>
									<h:inputText
										value="#{logParecerMB.filtroNuConveniado}"
										styleClass="forms_input pressEnter" style="width: 100px;"
										id="lblPesqCampoConveniado" maxlength="30" tabindex="12" size="8">
									</h:inputText>
								</td>
							</tr>
							
							<tr class="distanciaLinha">
								<td>
									<h:outputLabel id="lblPesqPeriodoVerificacao"
										styleClass="rotulosPro"
										value="#{msgsLogParecer['LABEL.periodoVerificacao']}: " />
								</td>
								<td colspan="4">
									<rich:calendar
										id="lblPesqDataIniVerificacao"
										enableManualInput="true"
 										oninputblur="validaData(this)"										
										tabindex="13"
										inputClass="forms_input maskDate"
										datePattern="dd/MM/yyyy"
										inputSize="10"
										firstWeekDay="0"
										value="#{logParecerMB.filtroInicio}">
									</rich:calendar>
									<h:outputLabel id="lblPesqPeriodoVerificacaoA"
										styleClass="rotulosPro" style="margin-left: 25px; margin-right: 25px;"
										value="#{msgsLogParecer['LABEL.a']}: " />
									<rich:calendar
										id="lblPesqDataFimVerificacao"
										tabindex="14"
										oninputblur="validaData(this)"
										enableManualInput="true"
										inputClass="forms_input maskDate"
										datePattern="dd/MM/yyyy"
										inputSize="10"
										firstWeekDay="0"
										value="#{logParecerMB.filtroFim}">
									</rich:calendar>
								</td>
								<td colspan="2">
									<h:selectBooleanCheckbox styleClass="rotulos"
										id="inputFiltroSomenteErro"
										tabindex="15"
										value="#{logParecerMB.filtroSomenteErro}" />
									<h:outputLabel value="#{msgsLogParecer['LABEL.somenteErro']}"
										for="inputSomenteErro"
										class="rotulos"
										style="margin-left: 5px;" />
								</td>
							</tr>
							
							<tr class="distanciaLinha">
								<td colspan="3"></td>
								<td colspan="4">
									<rich:spacer width="145px;"></rich:spacer>
									<h:graphicImage value="/images/icon_minus.gif" />
									<a4j:commandLink actionListener="#{logParecerMB.doConsultarSimples}" value="#{msgsLogParecer['LABEL.pesquisaSimples']}"
													   styleClass="rotulos" reRender="panelPrincipal"
													   tabindex="16"
													   status="sts"
													   style="margin-left: 3px;" />
									<rich:spacer width="30px;"></rich:spacer>
									<a4j:commandButton
										tabindex="17"
										id="btnfiltrarVerificacaoPreventivaFiltroAvancado"
										styleClass="rich-button btn-consultar"
										value="#{msgsVerificacaoPreventiva['ACTION.filtrar']}"
										actionListener="#{logParecerMB.doConsultarClick}"
										reRender="conteudo, CEFMessagePanel, tableReenviaParecer, pnlBread"
										status="sts" />
																				
									<rich:spacer width="30px;"></rich:spacer>
									<a4j:commandButton
										id="btnLimparFiltro"
										tabindex="18"
										styleClass="rich-button-cinza rich-button"
										value="#{msgsVerificacaoPreventiva['ACTION.limpar']}"
										actionListener="#{verificacaoPreventivaMB.doLimpar}"
										reRender="conteudo, pnlFiltroVerificacaoPreventivaFiltro, pnlBread"
										status="sts" />
								</td>
							</tr>
						</table>
					</rich:panel>
					<br />
				</h:panelGroup>
				<!-- FINAL FILTROS PARA PESQUISA -->
				<!-- GRID LISTAGEM -->
				<h:panelGroup
					id="panelLista"
					rendered="#{verificacaoPreventivaMB.showPanelLista}">
					<div style="float: left;">
						<h:graphicImage
							value="/images/icon_estagiarios_.gif"
							style="vertical-align: bottom;" />
						<h:outputText
							id="lbl_titlePanelListContrato"
							value="#{msgsLogParecer['TITLE.panelCadastro']}"
							styleClass="tituloPagina" />
						
						<a4j:commandButton
							id="btnReenviaParecer"
							styleClass="rich-button btn-consultar"
							value="#{msgsLogParecer['ACTION.reenviar']}"
							style="margin-left: 10px;"
							onclick="jsReenviaParecer();"
							reRender="conteudo, CEFMessagePanel, modalReenviaParecer, pnlBread"
							status="sts" />

						<a4j:jsFunction id="jsReenviaParecer" name="jsReenviaParecer"
							reRender="CEFMessagePanel"
							actionListener="#{logParecerMB.validaPareceres}"
							data="#{logParecerMB.valido}"
							oncomplete="if (data) {jsReenviaParecerSucesso();} else {alert('Selecione pelo menos um Parecer');}">
						</a4j:jsFunction>

						<a4j:jsFunction
							id="jsReenviaParecerSucesso"
							name="jsReenviaParecerSucesso"
							reRender="CEFMessagePanel, modalReenviaParecer"
							actionListener="#{logParecerMB.doAbreModalReenviaParecer}"
							oncomplete="Richfaces.showModalPanel('modalReenviaParecer');"
							immediate="true">
						</a4j:jsFunction>
					
					</div>
					<br />
					<rich:spacer height="10" />
					<rich:dataTable
						id="tableReenviaParecer"
						value="#{logParecerMB.listaDataTable}"
						var="log"
						rows="10"
						width="100%"
						cellspacing="0"
						cellpadding="0"
						border="1"
						rowClasses="tabela-row-1, tabela-row-2"
						onRowMouseOver="this.style.backgroundColor = '#A2B6E5'"
						onRowMouseOut="this.style.backgroundColor = ''">
						
						<rich:column id="colParecer" style="text-align:center;" width="8%">
							<f:facet name="header">
								<h:outputText id="lblParecer" styleClass="rotulosPro"
									value="#{msgsLogParecer['COLUMN.parecer']}" />
							</f:facet>
							
							<h:selectBooleanCheckbox value="#{log.reenviar}">
								<a4j:support event="onclick" actionListener="#{logParecerMB.doFazNada}"/>
							</h:selectBooleanCheckbox>

						</rich:column>

						<rich:column id="colAssunto" style="text-align:center;"
							width="37%"
							sortBy="#{log.noParecer}">
							<f:facet name="header">
								<h:outputText id="lblAssunto" styleClass="rotulosPro"
									value="#{msgsLogParecer['COLUMN.assunto']}" />
							</f:facet>

							<h:outputText id="lblColAssunto" value="#{log.noParecer}"/>

						</rich:column>

						<rich:column id="colResponsavel" style="text-align:center;"
							width="10%" sortBy="#{log.coResponsavelParecer}">
							<f:facet name="header">
								<h:outputText id="lblResponsavel" styleClass="rotulosPro"
									value="#{msgsLogParecer['COLUMN.responsavel']}" />
							</f:facet>

							<h:outputText id="lblColResponsavel" value="#{log.coResponsavelParecer}"/>

						</rich:column>

						<rich:column id="colUnidade" style="text-align:center;" width="10%"
							sortBy="#{log.nuUnidade}">
							<f:facet name="header">
								<h:outputText id="lblUnidade" styleClass="rotulosPro"
									value="#{msgsLogParecer['COLUMN.unidade']}" />
							</f:facet>

							<h:outputText id="lblColUnidade" value="#{log.nuUnidade}"/>

						</rich:column>
						
						
						<rich:column id="colProduto" style="text-align:center;" width="15%"
							sortBy="#{log.coProduto}">
							<f:facet name="header">
								<h:outputText id="lblProduto" styleClass="rotulosPro"
									value="#{msgsLogParecer['COLUMN.produto']}" />
							</f:facet>

							<h:outputText id="lblColProduto" value="#{log.coProduto}"/>

						</rich:column>
						
						<rich:column id="colData" style="text-align:center;" width="10%"
							sortBy="#{log.dtParecer}">
							<f:facet name="header">
								<h:outputText id="lblData" styleClass="rotulosPro"
									value="#{msgsLogParecer['COLUMN.data']}" />
							</f:facet>

							<h:outputText id="lblColData" value="#{log.dtParecer}">
								<f:convertDateTime pattern="dd/MM/yyyy" />
							</h:outputText>

						</rich:column>
						
						<rich:column id="colAcao" style="text-align:center;" width="10%">
							<f:facet name="header">
								<h:outputText id="lblAcao" styleClass="rotulosPro"
									value="#{msgsLogParecer['COLUMN.acao']}" />
							</f:facet>

							<h:panelGroup>
								<h:commandLink
									actionListener="#{logParecerMB.doDownloadPDF}"
									title="PDF">
									<h:graphicImage
										value="/images/icon_detalhes.gif"
										alt="Download PDF" />
								</h:commandLink>
							</h:panelGroup>
							<rich:spacer width="18"/>
							<h:panelGroup>
								<a4j:commandLink
									actionListener="#{logParecerMB.doMostraDetalhes}"
									reRender="modalDetalhesParecer, formDetalhesParecer, panelDetalhesParecer"
									status="sts"
									oncomplete="Richfaces.showModalPanel('modalDetalhesParecer');"
									title="Detalhes">
									<h:graphicImage
										rendered="#{log.icSituacaoEnvioParecer}"
										value="/images/email-sucesso.gif"
										alt="Ver Detalhes" />
									<h:graphicImage
										rendered="#{!log.icSituacaoEnvioParecer}"
										value="/images/email-erro.gif"
										alt="Ver Detalhes" />
								</a4j:commandLink>
							</h:panelGroup>

						</rich:column>
						
						<f:facet name="footer">
							<rich:datascroller
								fastControls="false"
								inactiveStyleClass="classe-datascroller classe-datascroller-unselected"
								selectedStyleClass="classe-datascroller classe-datascroller-selected"
								id="dataFooterReenviaParecer"
								renderIfSinglePage="false">
								<f:facet name="first">
									<h:graphicImage value="/images/tabela/seta_primeiro.gif" />
								</f:facet>
								<f:facet name="first_disabled">
									<h:graphicImage value="/images/tabela/seta_primeiro.gif" />
								</f:facet>
								<f:facet name="last">
									<h:graphicImage value="/images/tabela/seta_ultimo.gif" />
								</f:facet>
								<f:facet name="last_disabled">
									<h:graphicImage value="/images/tabela/seta_ultimo.gif" />
								</f:facet>
								<f:facet name="previous">
									<h:graphicImage value="/images/tabela/seta_anterior.gif" />
								</f:facet>
								<f:facet name="previous_disabled">
									<h:graphicImage value="/images/tabela/seta_anterior.gif" />
								</f:facet>
								<f:facet name="next">
									<h:graphicImage value="/images/tabela/seta_proximo.gif" />
								</f:facet>
								<f:facet name="next_disabled">
									<h:graphicImage value="/images/tabela/seta_proximo.gif" />
								</f:facet>
							</rich:datascroller>
						</f:facet>
					</rich:dataTable>
				</h:panelGroup>
				
			</rich:panel>
		</h:form>

			
		<!-- Modal Reenvia Parecer -->
		<rich:modalPanel id="modalReenviaParecer" width="970"
			showWhenRendered="#{logParecerMB.showModalReenvia}"
			onshow="jQuery('.cef-message-panel').css('z-index', 101); iniciaCampoTexto();"
			resizeable="true" height="530">
			<f:facet name="header">
				<h:outputText value="#{msgsLogParecer['TITLE.modal']}" />
			</f:facet>
			<h:form id="formReenviaParecer">
				<rich:panel id="panelReenviaParecer" styleClass="panel-externo">
					<h:panelGrid columns="2">
						<h:column>
							<table style="width: 600px; padding-left: 5px;">
								<tr class="distanciaLinha">
									<td style="width: 70px;">
										<h:outputLabel
											id="lblReenviaDe"
											styleClass="rotulosPro"
											value="#{msgsLogParecer['LABEL.de']}: " />
									</td>
									<td>
										<h:inputText
											value="#{logParecerMB.de}"
											styleClass="forms_input pressEnter"
											style="width: 508px;"
											id="txtReenviaDe"
											maxlength="70"
											size="40" />
									</td>
								</tr>
								<tr class="distanciaLinha">
									<td>
										<h:outputLabel
											id="lblReenviaPara"
											styleClass="rotulosPro"
											value="#{msgsLogParecer['LABEL.para']}: " />
									</td>
									<td>
										<h:inputText
											value="#{logParecerMB.para}"
											styleClass="forms_input pressEnter"
											style="width: 508px;"
											id="txtReenviaPara"
											maxlength="70"
											size="40" />
									</td>
								</tr>
								<tr class="distanciaLinha">
									<td>
										<h:outputLabel
											id="lblReenviaCopia"
											styleClass="rotulosPro"
											value="#{msgsLogParecer['LABEL.copia']}: " />
									</td>
									<td>
										<h:inputText
											value="#{logParecerMB.copia}"
											styleClass="forms_input pressEnter"
											style="width: 508px;"
											id="txtReenviaCopia"
											maxlength="70"
											size="40" />
									</td>
								</tr>
								<tr class="distanciaLinha">
									<td>
										<h:outputLabel
											id="lblReenviaAssunto"
											styleClass="rotulosPro"
											value="#{msgsLogParecer['LABEL.assunto']}: " />
									</td>
									<td>
										<h:inputText
											value="#{logParecerMB.assunto}"
											styleClass="forms_input pressEnter"
											style="width: 508px;"
											id="txtReenviaAssunto"
											maxlength="70"
											size="40" />
									</td>
								</tr>
							</table>
						</h:column>
						
						<h:column>									
							<rich:dataTable
								id="tableAnexos"
								var="anexo"
								rows="2"
								value="#{logParecerMB.anexos}"
								width="325px"
								cellspacing="0"
								cellpadding="0"
								border="1"
								
								rowClasses="tabela-row-1, tabela-row-2"
								onRowMouseOver="this.style.backgroundColor = '#A2B6E5'"
								onRowMouseOut="this.style.backgroundColor = ''">
						
								<rich:column id="colImagem" style="text-align:left;" width="8%">
									<f:facet name="header">
										<h:outputText id="lblColImgPdf" styleClass="rotulosPro"
											value=" " />
									</f:facet>									
									<h:graphicImage
										value="/images/file-pdf.png"
										alt="PDF" />
								</rich:column>
								
								<rich:column id="colNome" style="text-align:left;">
									<f:facet name="header">
										<h:outputText id="lblColNomeParecer" styleClass="rotulosPro"
											value="#{msgsLogParecer['LABEL.anexos']}" />
									</f:facet>									
									<h:outputText id="lblNomeParecer" styleClass="rotulosPro"
										value="#{anexo.nomeArquivo}" />
								</rich:column>
								
								<f:facet name="footer">
									<rich:datascroller
										fastControls="false"
										inactiveStyleClass="classe-datascroller classe-datascroller-unselected"
										selectedStyleClass="classe-datascroller classe-datascroller-selected"
										id="dataFooterReenviaParecerAnexos"
										renderIfSinglePage="false">
										<f:facet name="first">
											<h:graphicImage value="/images/tabela/seta_primeiro.gif" />
										</f:facet>
										<f:facet name="first_disabled">
											<h:graphicImage value="/images/tabela/seta_primeiro.gif" />
										</f:facet>
										<f:facet name="last">
											<h:graphicImage value="/images/tabela/seta_ultimo.gif" />
										</f:facet>
										<f:facet name="last_disabled">
											<h:graphicImage value="/images/tabela/seta_ultimo.gif" />
										</f:facet>
										<f:facet name="previous">
											<h:graphicImage value="/images/tabela/seta_anterior.gif" />
										</f:facet>
										<f:facet name="previous_disabled">
											<h:graphicImage value="/images/tabela/seta_anterior.gif" />
										</f:facet>
										<f:facet name="next">
											<h:graphicImage value="/images/tabela/seta_proximo.gif" />
										</f:facet>
										<f:facet name="next_disabled">
											<h:graphicImage value="/images/tabela/seta_proximo.gif" />
										</f:facet>
									</rich:datascroller>
								</f:facet>
						
							</rich:dataTable>
						</h:column>
					</h:panelGrid>
					<br/>
					<center>
						<textarea id="textAreaCorpoEmail" jsfc="h:inputTextarea"
							value="#{logParecerMB.conteudo}"
							cols="99" rows="17" style="width: 900px; *width: 900px;"></textarea>
					</center>
				</rich:panel>
				
				<br/>
				<div style="float: right;">
					<h:commandButton
						id="botaoAlterarTemplateParecer"
						tabindex="6"
						onclick="if(!confirm('#{msgsCef['MA001']}')) {return false;}"
						actionListener="#{logParecerMB.doReenviar}"
						value="#{msgsLogParecer['ACTION.reenviar']}"
						styleClass="rich-button"
						style="margin-right:6px; *margin-right:10px; margin-left: 15px; "
						reRender="CEFMessagePanel, conteudo, pnlBread, modalReenviaParecer"/>	
													
					<h:commandButton
						id="btnCancelarReenvioParecer"
						styleClass="rich-button-cinza rich-button"
						value="#{msgsLogParecer['ACTION.cancelar']}"
						actionListener="#{logParecerMB.doCancelar}"
						onclick="Richfaces.hideModalPanel('modalReenviaParecer')"
						reRender="conteudo, CEFMessagePanel, pnlBread, modalReenviaParecer"
						style="margin-left: 15px;"
						immediate="true"
						status="sts" />
				</div>
			</h:form>
		</rich:modalPanel>
		
		<!-- Modal Detalhes Parecer -->
		<rich:modalPanel id="modalDetalhesParecer" width="500"
			onshow="jQuery('.cef-message-panel').css('z-index', 101);"
			resizeable="false" autosized="true">
			<f:facet name="header">
				<h:outputText value="#{msgsLogParecer['TITLE.modalDetalhes']}" />
			</f:facet>
			<h:form id="formDetalhesParecer">
				<rich:panel id="panelDetalhesParecer" styleClass="panel-externo" style="padding-left: 10px;">
					<table>
						<tr>
							<td width="105px"></td>
							<td></td>
						</tr>
						<tr class="distanciaLinha">
							<td>
								<h:outputLabel
									id="lblDetalhesData"
									styleClass="rotulosPro"
									value="#{msgsLogParecer['LABEL.dataEnvio']}: " />
							</td>
							<td>
								<h:outputText id="lblDataDetalhes"
									value="#{logParecerMB.logParecer.dtEnvioParecer}">
									<f:convertDateTime pattern="dd/MM/yyyy" />	
								</h:outputText>
							</td>
						</tr>
						<tr class="distanciaLinha">
							<td>
								<h:outputLabel
									id="lblDetalhesSituacao"
									styleClass="rotulosPro"
									value="#{msgsLogParecer['LABEL.situacao']}: " />
							</td>
							<td>
								<h:outputText id="lblSituacaoDetalhesSucesso"
									rendered="#{logParecerMB.logParecer.icSituacaoEnvioParecer}"
									value="SUCESSO"/>
								<h:outputText id="lblSituacaoDetalhesErro"
									rendered="#{!logParecerMB.logParecer.icSituacaoEnvioParecer}"
									value="ERRO"/>
							</td>
						</tr>
						<tr class="distanciaLinha">
							<td colspan="2">
								<h:outputText id="lblInfoDetalhes"
									escape="false"
									value="#{logParecerMB.logParecer.deEnvioParecer}"/>
							</td>
						</tr>
					</table>
				</rich:panel>
				
				<br/>
				<div style="float: right;">
					<h:commandButton
						id="btnCancelarDetalhesParecer"
						styleClass="rich-button-cinza rich-button"
						value="#{msgsLogParecer['ACTION.cancelar']}"
						onclick="Richfaces.hideModalPanel('modalDetalhesParecer')"
						reRender="conteudo, CEFMessagePanel, pnlBread, modalDetalhesParecer"
						style="margin-left: 15px;"
						immediate="true"
						status="sts" />
				</div>
			</h:form>
		</rich:modalPanel>
	</ui:define>
</ui:composition>
</html>